<div style="margin: 0;">
    <div id="snackbar">{{message}}</div>
</div>

<div fxLayout="row" >
   
	<mat-drawer-container style="width: 100%;">
       
		<mat-drawer  #snav class="adminMenu" style="position: relative;"  opened [mode]="'side'">
			<mat-nav-list>
                <ul>
                    <li class="textsize" *ngIf="functionList.includes('100')"><a [routerLink]="['/clientreg','0']" skipLocationChange=true><i class="fa fa-users fa-2x" aria-hidden="true"></i><br>Client</a></li>
                    <li class="activeMenu textsize" *ngIf="functionList.includes('101')"><a [routerLink]="['/vendorreg','0']" skipLocationChange=true><i class="fa fa-industry fa-2x" aria-hidden="true"></i>&nbsp;<br>Vendor</a></li>
                    <li class="textsize" *ngIf="functionList.includes('102')"><a [routerLink]="['/user']" skipLocationChange=true><i class="fa fa-user-circle fa-2x" aria-hidden="true"></i><br>User</a></li>
                    <li class="textsize" *ngIf="functionList.includes('103')"><a [routerLink]="['/role']" skipLocationChange=true><i class="fa fa-star fa-2x" aria-hidden="true"></i><br>Role</a></li>
                    <li class="textsize" *ngIf="functionList.includes('104')"><a [routerLink]="['/rule']" skipLocationChange=true><i class="fa fa-gavel fa-2x" aria-hidden="true"></i><br>Rule</a></li>
                    <li class="textsize" *ngIf="functionList.includes('105')"><a style="cursor:pointer;" (click)="openDialogaddNewCity()"><i class="fas fa-city  fa-2x"></i><br>City</a></li>
                </ul>          			
			</mat-nav-list>
		</mat-drawer>

   <mat-drawer-content style="margin-left:20%">
    
        <div style="float: left;" class="adminList">        
            <mat-form-field style="margin:10px;">
                <mat-icon matSuffix class="searchIcon">search</mat-icon>
                <input matInput type="search" placeholder="Search Vendor" [(ngModel)]="term" class="search-input">
            </mat-form-field>   
            <ul style="margin-top:-10px;">         
                <li *ngFor="let item of vendorList| filtervendor:term ;" [ngClass]="{'selected':  item.MId== id}"><i class="fa fa-university" aria-hidden="true"></i>&nbsp;<a [routerLink]="['/vendorreg',item.MId]" skipLocationChange=true (click)="getId(item.MId)">{{item.MName}}</a></li>              
            </ul>
        </div>
<div style="float: left;width: 81%;">
<form class="form" role="form" focusInvalidInput autocomplete="off" id="Vendorform" novalidate=""
[formGroup]="addVendorForm" (submit)='addVendor(addVendorForm.value)'>
<div class="whiteframe" style="width: 93%;">
    <h3 *ngIf="id != 0 else title">Update Vendor  <span *ngIf="id != 0"> for #{{id}} - {{vendorname}}</span></h3>
    <ng-template #title>
        <h3 *ngIf="id == 0 ">Add New Vendor</h3>
    </ng-template>       
<table style="width:100%">
    <tr> 
        <td>
            <mat-form-field>
                <input maxlength="80" required matInput placeholder="Vendor Name" id="VendorName" formControlName="VendorName" class="form-control"/>               
                <mat-error *ngFor="let validation of validation_messages.VendorName">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('VendorName').hasError(validation.type) && (addVendorForm.get('VendorName').dirty || addVendorForm.get('VendorName').touched)">{{validation.message}}</mat-error>
                </mat-error>
            </mat-form-field>        
        </td>  
        
        <td>     
            <mat-form-field class="example-full-width">  
                <input maxlength="80" matInput placeholder="Door No,Street" formControlName="RegdAddressL1" class="form-control"/>
                <!--<mat-error *ngFor="let validation of validation_messages.RegdAddressL1">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('RegdAddressL1').hasError(validation.type) && (addVendorForm.get('RegdAddressL1').dirty || addVendorForm.get('RegdAddressL1').touched)">{{validation.message}}</mat-error>
                </mat-error>-->
             </mat-form-field>                    
        </td>
        <td>            
            <mat-form-field>
                <input maxlength="40" matInput placeholder="Area" formControlName="Area" class="form-control"/>
                <!--<mat-error *ngFor="let validation of validation_messages.Area">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('Area').hasError(validation.type) && (addVendorForm.get('Area').dirty || addVendorForm.get('Area').touched)">{{validation.message}}</mat-error>
                </mat-error>-->
            </mat-form-field>
        </td>
        <td>            
            <mat-form-field>
                <select matNativeControl maxlength="40" placeholder="City" formControlName="City"> 
                    <option *ngFor="let item of cityLookups" value="{{item.Code}}" selected>{{item.Description}}</option>                       
                </select>  
                <!--<mat-error *ngFor="let validation of validation_messages.City">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('City').hasError(validation.type) && (addVendorForm.get('City').dirty || addVendorForm.get('City').touched)">{{validation.message}}</mat-error>
                </mat-error>-->
            </mat-form-field>
        </td>         
    </tr>
    <tr>               
        <td>            
            <mat-form-field>
                <input maxlength="6" matInput placeholder="PINCODE" formControlName="PINCODE" class="form-control"/>
                <!--<mat-error *ngFor="let validation of validation_messages.PINCODE">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('PINCODE').hasError(validation.type) && (addVendorForm.get('PINCODE').dirty || addVendorForm.get('PINCODE').touched)">{{validation.message}}</mat-error>
                </mat-error>-->
            </mat-form-field>
        </td> 
        <td>            
            <mat-form-field>
                <input maxlength="10" matInput required placeholder="Mobile Number 1" formControlName="VendorMobileNo" class="form-control"/>
                <mat-error *ngFor="let validation of validation_messages.VendorMobileNo">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('VendorMobileNo').hasError(validation.type) && (addVendorForm.get('VendorMobileNo').dirty || addVendorForm.get('VendorMobileNo').touched)">{{validation.message}}</mat-error>
                </mat-error>
            </mat-form-field>
        </td>      
        <td>            
            <mat-form-field>
                <input maxlength="10" matInput placeholder="Mobile Number 2" formControlName="VendorPhoneNo" class="form-control"/>
                <mat-error *ngFor="let validation of validation_messages.VendorPhoneNo">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('VendorPhoneNo').hasError(validation.type) && (addVendorForm.get('VendorPhoneNo').dirty || addVendorForm.get('VendorPhoneNo').touched)">{{validation.message}}</mat-error>
                </mat-error>
            </mat-form-field>
        </td> 
        <td>            
            <mat-form-field>
                <input maxlength="40" matInput required placeholder="Email Id" formControlName="VendorEMAILID" class="form-control"/>
                <mat-error *ngFor="let validation of validation_messages.VendorEMAILID">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('VendorEMAILID').hasError(validation.type) && (addVendorForm.get('VendorEMAILID').dirty || addVendorForm.get('VendorEMAILID').touched)">{{validation.message}}</mat-error>
                </mat-error>
            </mat-form-field>
        </td>      
    </tr>
    <tr>   
        <td>            
            <mat-form-field>
                <input maxlength="80" matInput placeholder="GST Number" formControlName="VendorGSTNo" class="form-control"/>
            </mat-form-field>
        </td>      
        <td>            
            <mat-form-field>
                <input maxlength="80" matInput placeholder="LandMark" formControlName="VendorLandMark" class="form-control"/>
            </mat-form-field>
        </td>      
    </tr>
</table>
</div>
<div class="whiteframe" style="width: 93%;">
<h3>Vendor Organisation  Details</h3>     
<table  style="width:100%">
    <tr>
        <td>            
            <mat-form-field>
                <input maxlength="40" matInput placeholder="First Name" formControlName="MainContact" class="form-control"/>
                <!--<mat-error *ngFor="let validation of validation_messages.MainContact">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('MainContact').hasError(validation.type) && (addVendorForm.get('MainContact').dirty || addVendorForm.get('MainContact').touched)">{{validation.message}}</mat-error>
                </mat-error>-->
            </mat-form-field>
        </td>     
        <td>
            <mat-form-field>
                <input maxlength="80" matInput placeholder="Last Name" formControlName="VendorLastName" class="form-control"/>               
                <!--<mat-error *ngFor="let validation of validation_messages.VendorLastName">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('VendorLastName').hasError(validation.type) && (addVendorForm.get('VendorLastName').dirty || addVendorForm.get('VendorLastName').touched)">{{validation.message}}</mat-error>
                </mat-error>-->
            </mat-form-field>        
        </td>                
        <td>            
            <mat-form-field>
                <input maxlength="40" matInput placeholder="Designation" formControlName="MainContactDesgn" class="form-control"/>
            </mat-form-field>
        </td>      
        <td>            
            <mat-form-field>
                <input maxlength="10" matInput placeholder="Contact Number" formControlName="MainContactNo" class="form-control"/>
                <mat-error *ngFor="let validation of validation_messages.MainContactNo">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('MainContactNo').hasError(validation.type) && (addVendorForm.get('MainContactNo').dirty || addVendorForm.get('MainContactNo').touched)">{{validation.message}}</mat-error>
                </mat-error>
            </mat-form-field>
        </td>      
            
    </tr>
    <tr>
        <td>            
            <mat-form-field>
                <input maxlength="40" matInput placeholder="Email Id" formControlName="MainContactEmailId" class="form-control"/>
                <mat-error *ngFor="let validation of validation_messages.MainContactEmailId">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('MainContactEmailId').hasError(validation.type) && (addVendorForm.get('MainContactEmailId').dirty || addVendorForm.get('MainContactEmailId').touched)">{{validation.message}}</mat-error>
                </mat-error>
            </mat-form-field>
        </td>  
    </tr>
    <!--<tr>
        <td>            
            <mat-form-field>
                <input maxlength="40" matInput placeholder="Alternate Contact" formControlName="AltContact" class="form-control"/>
                <mat-error *ngFor="let validation of validation_messages.AltContact">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('AltContact').hasError(validation.type) && (addVendorForm.get('AltContact').dirty || addVendorForm.get('AltContact').touched)">{{validation.message}}</mat-error>
                </mat-error>
            </mat-form-field>
        </td>                
        <td>            
            <mat-form-field>
                <input maxlength="40" matInput placeholder="Alternate Designation" formControlName="AltContactDesgn" class="form-control"/>
            </mat-form-field>
        </td>      
        <td>            
            <mat-form-field>
                <input maxlength="10" matInput placeholder="Alternate Contact No" formControlName="AltContactNo" class="form-control"/>
                <mat-error *ngFor="let validation of validation_messages.AltContactNo">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('AltContactNo').hasError(validation.type) && (addVendorForm.get('AltContactNo').dirty || addVendorForm.get('AltContactNo').touched)">{{validation.message}}</mat-error>
                </mat-error>
            </mat-form-field>
        </td>      
        <td>            
            <mat-form-field>
                <input maxlength="40" matInput placeholder="Alternate Email Id" formControlName="AltContactEmailId" class="form-control"/>
                <mat-error *ngFor="let validation of validation_messages.AltContactEmailId">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('AltContactEmailId').hasError(validation.type) && (addVendorForm.get('AltContactEmailId').dirty || addVendorForm.get('AltContactEmailId').touched)">{{validation.message}}</mat-error>
                </mat-error>
            </mat-form-field>
        </td>      
    </tr>-->
</table>
</div>
<div class="whiteframe" style="width: 93%;">
<h3>Other Details</h3>
<table  style="width:100%">
    <tr>
       <!-- <td>            
            <mat-form-field>
                <input maxlength="80" matInput placeholder="Vendor Status" formControlName="VendorStatus" class="form-control"/>
            </mat-form-field>
        </td>        -->
        
        <td>            
            <mat-form-field>
                <select matNativeControl maxlength="80" placeholder="Vendor Category" formControlName="VendorTier"> 
                    <option *ngFor="let item of LookupCategory" value="{{item.Code}}" selected>{{item.Description}}</option>                       
                </select>  
                <!--<mat-error *ngFor="let validation of validation_messages.VendorTier">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('VendorTier').hasError(validation.type) && (addVendorForm.get('VendorTier').dirty || addVendorForm.get('VendorTier').touched)">{{validation.message}}</mat-error>
                </mat-error>-->
            </mat-form-field>
        </td>      
        <td>            
            <mat-form-field>
                <select matNativeControl maxlength="80" placeholder="Industry Expertise" formControlName="VendorExpertise"> 
                    <option *ngFor="let item of LookupExpertise" value="{{item.Code}}" selected>{{item.Description}}</option>                       
                </select> 
                <!--<mat-error *ngFor="let validation of validation_messages.VendorExpertise">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('VendorExpertise').hasError(validation.type) && (addVendorForm.get('VendorExpertise').dirty || addVendorForm.get('VendorExpertise').touched)">{{validation.message}}</mat-error>
                </mat-error>-->
            </mat-form-field>
        </td>  
        <td>            
            <mat-form-field>
                <select matNativeControl maxlength="80" placeholder="Vendor Type" formControlName="VendorType" (change)="vendorType($event.target.value)"> 
                    <option *ngFor="let item of LookupType" value="{{item.Code}}" selected>{{item.Description}}</option>                       
                </select>
                <!--<mat-error *ngFor="let validation of validation_messages.VendorType">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('VendorType').hasError(validation.type) && (addVendorForm.get('VendorType').dirty || addVendorForm.get('VendorType').touched)">{{validation.message}}</mat-error>
                </mat-error>-->
            </mat-form-field>
        </td>      
        <td>            
            <mat-form-field>
                <input maxlength="40" matInput placeholder="Team Size" formControlName="TeamSize" class="form-control"/>
            </mat-form-field>
        </td>
    </tr>
    <tr>        
       
        <td>            
            <mat-form-field>
                <input maxlength="40" matInput placeholder="AccountCode" formControlName="VendorGLCode" class="form-control"/>
            </mat-form-field>
        </td>  
       <!-- <td>            
            <mat-form-field>
                <input maxlength="80" matInput placeholder="Source" formControlName="Source" class="form-control"/>
            </mat-form-field>
        </td>-->
        <td>            
            <mat-form-field>
                <input maxlength="4" matInput placeholder="Max User Count" formControlName="AllowedUserCt" class="form-control"/>
            </mat-form-field>
        </td>    
        <td>            
            <mat-form-field>
                <input maxlength="4" matInput placeholder="Concurrent User Count" formControlName="ConcurrentUserCt" class="form-control"/>
            </mat-form-field>
        </td> 
        <td>            
            <mat-form-field>
                <select matNativeControl placeholder="CommonPoolYorN" class="form-control" id="CommonPoolYorN" name="CommonPoolYorN" formControlName="CommonPoolYorN" >
                    <option value='Y'>Y</option>
                    <option  value='N' selected>N</option>
                </select> 
            </mat-form-field>
        </td>   
    </tr>
    <tr>   
        <td>            
            <mat-form-field>
                <select matNativeControl placeholder="OwnPoolPermitYorN" class="form-control" id="OwnPoolPermitYorN" name="OwnPoolPermitYorN" formControlName="OwnPoolPermitYorN" >
                <option value='Y'>Y</option>
                <option  value='N' selected>N</option>
            </select>   
            </mat-form-field>
        </td> 
        <td>            
            <mat-form-field>
                <input maxlength="4" matInput id="adminRight" readonly placeholder="AdminRightsYorN" formControlName="AdminRightsYorN" class="form-control"/>
                <!--<select matNativeControl placeholder="AdminRightsYorN" class="form-control" id="AdminRightsYorN" name="AdminRightsYorN" formControlName="AdminRightsYorN" >
                    <option value='Y' selected>Y</option>
                    <option  value="N">N</option>
                </select>-->
            </mat-form-field>
        </td> 
        <td *ngIf="id != 0">            
            <mat-form-field>
                <select matNativeControl maxlength="40" placeholder="Vendor Status" formControlName="VendorStatus"> 
                    <option *ngFor="let item of VLookupStatus" value="{{item.Code}}" selected>{{item.Description}}</option>                       
                </select>                 
                <!--<mat-error *ngFor="let validation of validation_messages.VendorStatus">
                    <mat-error class="error-message" *ngIf="addVendorForm.invalid || addVendorForm.get('VendorStatus').hasError(validation.type) && (addVendorForm.get('VendorStatus').dirty || addVendorForm.get('VendorStatus').touched)">{{validation.message}}</mat-error>
                </mat-error>-->
            </mat-form-field>
        </td>     
    </tr>
    <tr>
        <td> 
            <button *ngIf="id != 0; else add" type="submit" mat-button cdkFocusInitial>Update Vendor</button>&nbsp;&nbsp;
            <a *ngIf="id != 0" [routerLink]="['/vendorreg/0']" skipLocationChange=true (click)="goToMainmenu()" style="margin-left:15px;"><button mat-button>Go to Main Menu</button></a>
            <ng-template #add>
                <button *ngIf="id == 0" type="submit" mat-button cdkFocusInitial>Add Vendor</button>&nbsp;&nbsp;
                </ng-template>
        </td>
    </tr>
</table>
</div>
</form>
</div>
</mat-drawer-content>
</mat-drawer-container>
</div>
